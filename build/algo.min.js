/*!*
 * algo.js
 *
 * JavaScript Creative Coding Framework
 * http://algojs.com
 *
 * Copyright 2015 hisa hayashi, HYS INC.
 */
var ALGO=function(){"use strict";function t(r){L=this,O=t.ObjectUtil.extend(param,r),e()}function e(){r(),n(),o()}function r(){L.width=param.width,L.height=param.height}function n(){L.render=new t.Render(L),L.render.setFramerate(L.framerate)}function i(){L.canvas=document.getElementById(O.id),L.canvas.width=O.width,L.canvas.height=O.height,L.renderer=new t.WebGLRenderer(L)}function o(){window.onload=function(){i(),L.setup&&L.setup.call(L)},window.onmouseover=function(){L.mouseover&&L.mouseover.call(L)},window.onmouseout=function(){L.mouseout&&L.mouseout.call(L)},window.onmousedown=function(){L.mousedown&&L.mousedown.call(L)},window.onmouseup=function(){L.mouseup&&L.mouseup.call(L)},window.onmousemove=function(){L.mousemove&&L.mousemove.call(L)},window.onkeydown=function(){L.keydown&&L.keydown.call(L)},window.onkeyup=function(){L.keyup&&L.keyup.call(L)},window.onresize=function(){L.resize&&L.resize.call(L),L.renderer&&L.renderer.resize()},L.render.startRender()}function a(t,e){this[t]=e,L[t]=this[t],L=this}function s(t,e){this[t]=e,L[t]=null}function u(){}function c(){}function h(){}function d(){}function l(){}function f(){}function p(){}function g(){}function m(){}function _(){}function x(){}function y(t,e){L.canvas.width=t,L.canvas.height=e,L.width=t,L.height=e}function A(t){t.add(L)}function v(t){t.remove(L)}var L,O={id:"",width:window.innerWidth,height:window.innerHeight};return t.prototype={constructor:t,setup:u,frame:c,destroy:h,mouseover:d,mouseout:l,mousedown:f,mouseup:p,mousemove:g,keydown:m,keyup:_,resize:x,bind:a,unbind:s,size:y,add:A,remove:v,render:null,renderer:null},t}();ALGO.debug=1,ALGO.BLEND_NONE=0,ALGO.BLEND_ADD=1,ALGO.BLEND_MULTIPLY=2,ALGO.BLEND_SCREEN=3,ALGO.prototype.__defineGetter__("framerate",function(){return this.framerate_}),ALGO.prototype.__defineSetter__("framerate",function(t){this.render&&this.render.setFramerate(t),this.framerate_=t}),ALGO.prototype.__defineGetter__("circleResolution",function(){return this.circleResolution_}),ALGO.prototype.__defineSetter__("circleResolution",function(t){ALGO.circleResolution=t,this.circleResolution_=t}),ALGO.prototype.width=0,ALGO.prototype.height=0,ALGO.prototype.blendMode=ALGO.BLEND_NONE,ALGO.prototype.backgroundAuto=!0,ALGO.prototype.background=6710886,ALGO.prototype.backgroundAlpha=.5,ALGO.prototype.depth=1,ALGO.prototype.framerate=60,ALGO.prototype.circleResolution=32,ALGO.prototype.canvas=null,ALGO.prototype.displayObjects=[],ALGO.prototype.children=[],ALGO.Render=function(){"use strict";function t(){e(),r()}function e(){}function r(){}function n(t){c=t,h=1e3/c,ALGO.log("setFramerate = "+c)}function i(){return c}function o(){g=!0,h=1e3/c,f=Date.now(),d=f,s()}function a(){g=!1}function s(){if(g&&_(s),l=Date.now(),p=l-f,p>h){f=l-p%h,u.renderer&&u.renderer.update(),u.frame&&u.frame.call(u);{var t=l-d;Math.round(1e3/(t/++m)*100)/100}}}var u,c,h,d,l,f,p,g=!1,m=0,_=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/c)};return ALGO.Render=function(e){u=e,t()},ALGO.Render.prototype={constructor:ALGO.Render,setFramerate:n,getFramerate:i,startRender:o,stopRender:a},ALGO.Render}(),ALGO.Matrix3=function(t){"use strict";function e(){return new Float32Array(16)}function r(t){return t=[1,0,0,0,1,0,0,0,1]}function n(t,e,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],h=t[7],d=t[8],l=e[0],f=e[1],p=e[2],g=e[3],m=e[4],_=e[5],x=e[6],y=e[7],A=e[8];return r[0]=n*l+i*g+o*x,r[1]=n*f+i*m+o*y,r[2]=n*p+i*_+o*A,r[3]=a*l+s*g+u*x,r[4]=a*f+s*m+u*y,r[5]=a*p+s*_+u*A,r[6]=c*l+h*g+d*x,r[7]=c*f+h*m+d*y,r[8]=c*p+h*_+d*A,r}function i(t,e,r){return r[0]=t[0]*e[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4]*e[1],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function o(t,e,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6]+e[0],r[7]=t[7]+e[1],r[8]=t[8],r}function a(t,e,r,n){var i=Math.cos(e),o=Math.sin(e);return n[0]=t[0]+i,n[1]=t[1]-o,n[2]=t[2],n[3]=t[3]+o,n[4]=t[4]+i,n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function s(t,e){return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e}function u(t,e){return e}return t.Matrix3=function(){},t.Matrix3.prototype={constructor:t.Matrix3,create:e,identity:r,multiply:n,scale:i,translate:o,rotate:a,transpose:s,inverse:u},t.Matrix3}(ALGO),ALGO.Matrix4=function(t){"use strict";function e(){return new Float32Array(16)}function r(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function n(t,e,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],h=t[7],d=t[8],l=t[9],f=t[10],p=t[11],g=t[12],m=t[13],_=t[14],x=t[15],y=e[0],A=e[1],v=e[2],L=e[3],O=e[4],w=e[5],G=e[6],R=e[7],S=e[8],b=e[9],M=e[10],E=e[11],T=e[12],P=e[13],U=e[14],F=e[15];return r[0]=y*n+A*s+v*d+L*g,r[1]=y*i+A*u+v*l+L*m,r[2]=y*o+A*c+v*f+L*_,r[3]=y*a+A*h+v*p+L*x,r[4]=O*n+w*s+G*d+R*g,r[5]=O*i+w*u+G*l+R*m,r[6]=O*o+w*c+G*f+R*_,r[7]=O*a+w*h+G*p+R*x,r[8]=S*n+b*s+M*d+E*g,r[9]=S*i+b*u+M*l+E*m,r[10]=S*o+b*c+M*f+E*_,r[11]=S*a+b*h+M*p+E*x,r[12]=T*n+P*s+U*d+F*g,r[13]=T*i+P*u+U*l+F*m,r[14]=T*o+P*c+U*f+F*_,r[15]=T*a+P*h+U*p+F*x,r}function i(t,e,r){return r[0]=t[0]*e[0],r[1]=t[1]*e[0],r[2]=t[2]*e[0],r[3]=t[3]*e[0],r[4]=t[4]*e[1],r[5]=t[5]*e[1],r[6]=t[6]*e[1],r[7]=t[7]*e[1],r[8]=t[8]*e[2],r[9]=t[9]*e[2],r[10]=t[10]*e[2],r[11]=t[11]*e[2],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function o(t,e,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12],r[13]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13],r[14]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14],r[15]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15],r}function a(t,e,r,n){var i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(!i)return null;var o=r[0],a=r[1],s=r[2];1!=i&&(i=1/i,o*=i,a*=i,s*=i);var u=Math.sin(e),c=Math.cos(e),h=1-c,d=t[0],l=t[1],f=t[2],p=t[3],g=t[4],m=t[5],_=t[6],x=t[7],y=t[8],A=t[9],v=t[10],L=t[11],O=o*o*h+c,w=a*o*h+s*u,G=s*o*h-a*u,R=o*a*h-s*u,S=a*a*h+c,b=s*a*h+o*u,M=o*s*h+a*u,E=a*s*h-o*u,T=s*s*h+c;return e?t!=n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[0]=d*O+g*w+y*G,n[1]=l*O+m*w+A*G,n[2]=f*O+_*w+v*G,n[3]=p*O+x*w+L*G,n[4]=d*R+g*S+y*b,n[5]=l*R+m*S+A*b,n[6]=f*R+_*S+v*b,n[7]=p*R+x*S+L*b,n[8]=d*M+g*E+y*T,n[9]=l*M+m*E+A*T,n[10]=f*M+_*E+v*T,n[11]=p*M+x*E+L*T,n}function s(t,e,n,i){var o=t[0],a=t[1],s=t[2],u=n[0],c=n[1],h=n[2],d=e[0],l=e[1],f=e[2];if(o==d&&a==l&&s==f)return r(i);var p,g,m,_,x,y,A,v,L,O;return A=o-e[0],v=a-e[1],L=s-e[2],O=1/Math.sqrt(A*A+v*v+L*L),A*=O,v*=O,L*=O,p=c*L-h*v,g=h*A-u*L,m=u*v-c*A,O=Math.sqrt(p*p+g*g+m*m),O?(O=1/O,p*=O,g*=O,m*=O):(p=0,g=0,m=0),_=v*m-L*g,x=L*p-A*m,y=A*g-v*p,O=Math.sqrt(_*_+x*x+y*y),O?(O=1/O,_*=O,x*=O,y*=O):(_=0,x=0,y=0),i[0]=p,i[1]=_,i[2]=A,i[3]=0,i[4]=g,i[5]=x,i[6]=v,i[7]=0,i[8]=m,i[9]=y,i[10]=L,i[11]=0,i[12]=-(p*o+g*a+m*s),i[13]=-(_*o+x*a+y*s),i[14]=-(A*o+v*a+L*s),i[15]=1,i}function u(t,e,r,n,i){var o=r*Math.tan(t*Math.PI/360),a=o*e,s=2*a,u=2*o,c=n-r;return i[0]=2*r/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*r/u,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-(n+r)/c,i[11]=-1,i[12]=0,i[13]=0,i[14]=-(n*r*2)/c,i[15]=0,i}function c(t,e){return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e}function h(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],d=t[9],l=t[10],f=t[11],p=t[12],g=t[13],m=t[14],_=t[15],x=r*s-n*a,y=r*u-i*a,A=r*c-o*a,v=n*u-i*s,L=n*c-o*s,O=i*c-o*u,w=h*g-d*p,G=h*m-l*p,R=h*_-f*p,S=d*m-l*g,b=d*_-f*g,M=l*_-f*m,E=1/(x*M-y*b+A*S+v*R-L*G+O*w);return e[0]=(s*M-u*b+c*S)*E,e[1]=(-n*M+i*b-o*S)*E,e[2]=(g*O-m*L+_*v)*E,e[3]=(-d*O+l*L-f*v)*E,e[4]=(-a*M+u*R-c*G)*E,e[5]=(r*M-i*R+o*G)*E,e[6]=(-p*O+m*A-_*y)*E,e[7]=(h*O-l*A+f*y)*E,e[8]=(a*b-s*R+c*w)*E,e[9]=(-r*b+n*R-o*w)*E,e[10]=(p*L-g*A+_*x)*E,e[11]=(-h*L+d*A-f*x)*E,e[12]=(-a*S+s*G-u*w)*E,e[13]=(r*S-n*G+i*w)*E,e[14]=(-p*v+g*y-m*x)*E,e[15]=(h*v-d*y+l*x)*E,e}return t.Matrix4=function(){},t.Matrix4.prototype={constructor:t.Matrix4,create:e,identity:r,multiply:n,scale:i,translate:o,rotate:a,lookAt:s,perspective:u,transpose:c,inverse:h},t.Matrix4}(ALGO),ALGO.ShapeCtrl={createID:function(t,e){for(var r="abcdefghijklmnopqrstuvwxyz0123456789",n=e?e:12,i="",o=0;n>o;o++){var a=r.length,s=Math.floor(Math.random()*a);i+=r.charAt(s)}return t.indexOf(i)>-1&&arguments.callee(t,e),i}},ALGO.Shape=function(){"use strict";function t(){this.vertexPosition=[],this.vertexColors=[],this.index=[],this.m=new ALGO.Matrix3,this.matrix=this.m.identity(this.m.create()),this.matrixScale=this.m.identity(this.m.create()),this.matrixRotate=this.m.identity(this.m.create()),this.matrixTranslate=this.m.identity(this.m.create())}function e(){var t=this.radius,e=[0,-t,-t,t,t,t],r=[0,0,0,1,0,0,0,1,0,0,0,1],n=[0,1,2];this.vertexPosition=e,this.vertexColors=r,this.index=n}function r(t){this.id||(this.id=ALGO.ShapeCtrl.createID(t.displayObjects,8)),t.displayObjects.push(this.id),t.children.push(this)}function n(t){var e=t.displayObjects.indexOf(id);e>-1&&(t.displayObjects.splice(e,1),t.children.splice(e,1))}function i(){}function o(t){for(var e=this.vertexColors,r=e.length,n=ALGO.ColorUtil.hexToRgbNormalize(t),i=0;r>i;i+=4)e[i]=n.r,e[i+1]=n.g,e[i+2]=n.b}function a(t){for(var e=this.vertexColors,r=e.length,n=0;r>n;n+=4)e[n+3]=t}function s(t){this.m&&this.m.scale(this.matrix,[t,t,0],this.matrixScale)}function u(t){if(this.m){var e=t*Math.PI/180;this.m.rotate(this.matrix,e,[0,1,0],this.matrixRotate)}}function c(t,e){this.m&&this.m.translate(this.matrix,[t,e,0],this.matrixTranslate)}function h(){var t=null;return this.m&&(t=this.m.identity(this.m.create()),this.m.multiply(this.matrix,this.matrixScale,t),this.m.multiply(t,this.matrixRotate,t),this.m.multiply(t,this.matrixTranslate,t)),t}return ALGO.Shape=function(t,e,r){this.x=t,this.y=e,this.radius=r,this.radius_=r,this.init(),this.setup()},ALGO.Shape.prototype={constructor:ALGO.Shape,name:"",type:"shape",id:null,x:0,y:0,width:null,height:null,angles:3,radius:null,alpha:1,visible:!0,color:16777215,scale:1,rotate:0,parent:void 0,m:void 0,matrix:void 0,matrixScale:void 0,matrixRotate:void 0,matrixTranslate:void 0,children:[],geometry:[],vertexPosition:[],vertexColors:[],needsUpdate:!1,index:[],x_:0,y_:0,scale_:1,rotate_:0,radius_:null,color_:16777215,alpha_:1,angle_:3,needsUpdate_:!1,init:t,setup:e,add:r,remove:n,clone:i,setVertexColor:o,setVertexAlpha:a,setScale:s,setRotate:u,setTranslate:c,getMatrix:h},ALGO.Shape}(),ALGO.Shape.prototype.__defineGetter__("x",function(){return this.x_}),ALGO.Shape.prototype.__defineSetter__("x",function(t){this.x_=t,this.setTranslate(this.x,this.y)}),ALGO.Shape.prototype.__defineGetter__("y",function(){return this.y_}),ALGO.Shape.prototype.__defineSetter__("y",function(t){this.y_=t,this.setTranslate(this.x,this.y)}),ALGO.Shape.prototype.__defineGetter__("scale",function(){return this.scale_}),ALGO.Shape.prototype.__defineSetter__("scale",function(t){this.setScale(t),this.scale_=t}),ALGO.Shape.prototype.__defineGetter__("rotate",function(){return this.rotate_}),ALGO.Shape.prototype.__defineSetter__("rotate",function(t){this.setRotate(t),this.rotate_=t}),ALGO.Shape.prototype.__defineGetter__("radius",function(){return this.radius_}),ALGO.Shape.prototype.__defineSetter__("radius",function(t){this.radius_=t}),ALGO.Shape.prototype.__defineGetter__("color",function(){return this.color_}),ALGO.Shape.prototype.__defineSetter__("color",function(t){this.setVertexColor(t),this.color_=t}),ALGO.Shape.prototype.__defineGetter__("alpha",function(){return this.alpha_}),ALGO.Shape.prototype.__defineSetter__("alpha",function(t){this.setVertexAlpha(t),this.alpha_=t}),ALGO.Shape.prototype.__defineGetter__("angle",function(){return this.angle_}),ALGO.Shape.prototype.__defineSetter__("angle",function(t){this.angle_=t}),ALGO.Shape.prototype.__defineGetter__("needsUpdate",function(){return this.needsUpdate_}),ALGO.Shape.prototype.__defineSetter__("needsUpdate",function(t){this.needsUpdate_=t}),ALGO.Polygon=function(t,e,r,n){"use strict";this.x=t,this.y=e,this.angles=r,this.radius=n,this.angles_=r,this.radius_=n,this.type="polygon",this.init(),this.setup()},ALGO.Polygon.prototype=Object.create(ALGO.Shape.prototype),ALGO.Polygon.prototype.constructor=ALGO.Polygon,ALGO.Polygon.prototype.setup=function(){for(var t=[],e=0;e<this.angles;e++)t[e]={},t[e].x=this.radius*Math.cos(2*e*Math.PI/this.angles-Math.PI/2),t[e].y=this.radius*Math.sin(2*e*Math.PI/this.angles-Math.PI/2);var r=[],n=[],i=ALGO.ColorUtil.hexToRgbNormalize(this.color);for(e=0;e<t.length;e++)r.push(t[e].x),r.push(t[e].y),n.push(i.r),n.push(i.g),n.push(i.b),n.push(this.alpha);this.vertexPosition=r,this.vertexColors=n;var o=[];for(e=1;e<this.angles-1;e++)o.push(0),o.push(e),o.push(e+1);this.index=o},ALGO.Circle=function(t,e,r){"use strict";this.x=t,this.y=e,this.angles=ALGO.circleResolution,this.radius=r,this.angles_=ALGO.circleResolution,this.radius_=r,this.type="circle",this.init(),this.setup()},ALGO.Circle.prototype=Object.create(ALGO.Polygon.prototype),ALGO.Circle.prototype.constructor=ALGO.Circle,ALGO.WebGLRenderer=function(t){"use strict";function e(t,e){return[2/t,0,0,0,-2/e,0,-1,1,1]}function r(){for(var r=new t.Matrix3,n=e(A,v),i=0;i<b.length;i++){var o=b[i],a=o.needsUpdate;if(!E[i]||a){var s=o.vertexPosition,u=o.vertexColors,c=[];c.position=l(s),c.color=l(u),E[i]=c}if(p(E[i],x,y),!T[i]||a){var h=o.index,d=f(h);P[i]=h,T[i]=d}m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,T[i]);var g=o.getMatrix(),_=r.multiply(g,n,[]);m.uniformMatrix3fv(L.matrix,!1,_),a&&(o.needsUpdate=!1),m.drawElements(m.TRIANGLES,P[i].length,m.UNSIGNED_SHORT,0)}m.flush()}function n(){A=O.width,v=O.height;var t=m.getUniformLocation(_,"u_resolution");m.uniform2f(t,O.width,O.height),m.viewport(0,0,A,v)}function i(){o(g),a(),R&&(s(),u()),c()}function o(t){O=t.canvas,w=t.background,G=t.backgroundAlpha,R=t.backgroundAuto,S=t.depth,b=t.children,M=t.displayObjects}function a(){m.clearDepth(S)}function s(){var e=t.ColorUtil.hexToRgbNormalize(w);m.clearColor(e.r,e.g,e.b,G)}function u(){m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT)}function c(){r()}function h(t){var e,r="";return"vertex"==t?(r="\r\n      attribute vec2 position2d;\r\n      uniform mat3 matrix2d;\r\n      uniform vec2 u_resolution;\r\n      attribute vec4 color;\r\n      varying   vec4 v_color; \r\n      uniform float point_size;\r\n      \r\n      void main(void){\r\n        v_color = color;\r\n        gl_PointSize = point_size;\r\n        \r\n        gl_Position = vec4((matrix2d * vec3(position2d, 1)).xy, 0, 1);\r\n      }",e=m.createShader(m.VERTEX_SHADER)):"fragment"==t&&(r="\r\n      precision mediump float;\r\n      varying vec4 v_color;\r\n      \r\n      void main(void){\r\n        gl_FragColor = v_color;\r\n      }",e=m.createShader(m.FRAGMENT_SHADER)),m.shaderSource(e,r),m.compileShader(e),m.getShaderParameter(e,m.COMPILE_STATUS)?e:void alert(m.getShaderInfoLog(e))}function d(t,e){var r=m.createProgram();return m.attachShader(r,t),m.attachShader(r,e),m.linkProgram(r),m.getProgramParameter(r,m.LINK_STATUS)?(m.useProgram(r),r):void alert(m.getProgramInfoLog(r))}function l(t){var e=m.createBuffer();return m.bindBuffer(m.ARRAY_BUFFER,e),m.bufferData(m.ARRAY_BUFFER,new Float32Array(t),m.STATIC_DRAW),m.bindBuffer(m.ARRAY_BUFFER,null),e}function f(t){var e=m.createBuffer();return m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,e),m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Int16Array(t),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null),e}function p(t,e,r){for(var n in t)m.bindBuffer(m.ARRAY_BUFFER,t[n]),m.enableVertexAttribArray(e[n]),m.vertexAttribPointer(e[n],r[n],m.FLOAT,!1,0,0)}var g,m,_,x,y,A,v,L,O,w,G,R,S,b,M,E=[],T=[],P=[];return t.WebGLRenderer=function(t){g=t,o(g),m=O.getContext("webgl")||O.getContext("experimental-webgl");var e=h("vertex"),i=h("fragment");_=d(e,i),n(),L={},L.position=m.getUniformLocation(_,"position2d"),L.matrix=m.getUniformLocation(_,"matrix2d"),L.color=m.getUniformLocation(_,"color"),L.point_size=m.getUniformLocation(_,"point_size"),x={},x.position=m.getAttribLocation(_,"position2d"),x.color=m.getAttribLocation(_,"color"),y={},y.position=2,y.color=4,r()},t.WebGLRenderer.prototype={constructor:t.WebGLRenderer,update:i,resize:n},t.WebGLRenderer}(ALGO),ALGO.log=function(t){window.console&&window.console.log&&ALGO.debug&&window.console.log(t)},ALGO.warn=function(t){window.console&&window.console.warn&&ALGO.debug&&window.console.warn(t)},ALGO.error=function(t){window.console&&window.console.error&&ALGO.debug&&window.console.error(t)},ALGO.PointUtil={normalize:function(t,e){var r=Math.sqrt(t.x*t.x+t.y*t.y);0!=r&&(t.x=e*t.x/r,t.y=e*t.y/r)},normalize3:function(t,e){var r=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return 0!=r&&(t.x=e*t.x/r,t.y=e*t.y/r,t.z=e*t.z/r),t},pointLength3:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},getDistance:function(t,e){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},getSlope:function(t,e){return(e.y-t.y)/(e.x-t.x)},getIntercept:function(t,e,r){var n=t.x+e.x,i=t.y+e.y;return i/2-r*n/2},getMidpoint:function(t,e){var r=[];return r.x=(t.x+e.x)/2,r.y=(t.y+e.y)/2,r},getMidperpendicular:function(t,e){var r=getSlope(t,e);x=checkEQ(r)?1:-1/r;var n=getMidpoint(t,e);return y=checkEQ(r)?0:n.y-x*n.x,{x:x,y:y}},getThroughPoint3:function(t,e,r){var n=getMidperpendicular(t,e),i=getMidperpendicular(t,r),o=[];o.x=(i.y-n.y)/(n.x-i.x),o.y=n.x*o.x+n.y;var a=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2));return{x:o.x,y:o.y,rad:a}},getHugeTriangle:function(t,e,r){var n=getThroughPoint3(t,e,r),i=n.x-Math.sqrt(3)*n.rad,o=n.y-n.rad,a=n.x+Math.sqrt(3)*n.rad,s=n.y-n.rad,u=n.x,c=n.y+2*n.rad;return[{x:i,y:o},{x:a,y:s},{x:u,y:c}]},checkEQ:function(t){var e=1e-6;return t>=-e&&e>=t}},ALGO.StringUtil={zeroPadding:function(t,e){return(Array(e).join("0")+t).slice(-e)},numComma:function(t){return String(t).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},separate:function(t){return String(t).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}},ALGO.ObjectUtil={extend:function(t,e){ALGO.ObjectUtil.clone(t);for(key in e){var r=e[key]?e[key]:t[key];t[key]=r}return t},clone:function(t){var e={};for(key in t)e[key]=t[key];return e}},ALGO.ColorUtil={rgbToHex:function(t,e,r){t=Math.floor(t),e=Math.floor(e),r=Math.floor(r);var n=(t<<16)+(e<<8)+r;return"0x"+n.toString(16)},hexToRgb:function(t){t=t.toString(16).replace("#","").replace("0x",""),t="0x"+t;var e={r:t>>16,g:t>>8&255,b:255&t};return e},hexToRgbNormalize:function(t){var e=ALGO.ColorUtil.hexToRgb(t);return e.r=e.r/256,e.g=e.g/256,e.b=e.b/256,e}},ALGO.Util={getBrowserLang:function(){var t=window.navigator.userAgent.toLowerCase();try{return-1!=t.indexOf("chrome")?(navigator.languages[0]||navigator.browserLanguage||navigator.language||navigator.userLanguage).substr(0,2):(navigator.browserLanguage||navigator.language||navigator.userLanguage).substr(0,2)}catch(e){return void 0}},isSmartDevice:function(){var t=navigator.userAgent,e=!1;return t.indexOf("iPhone")>0&&-1==t.indexOf("iPad")||t.indexOf("iPod")>0||t.indexOf("Android")>0&&t.indexOf("Mobile")>0?e="smartphone":(t.indexOf("iPad")>0||t.indexOf("Android")>0)&&(e="tablet"),e},getOS:function(){var t,e=window.navigator.userAgent.toLowerCase();return t=e.match(/win/)?"win":e.match(/mac|ppc/)?"mac":e.match(/linux/)?"linux":"other"},getBrowser:function(){var t=window.navigator.userAgent.toLowerCase(),e=window.navigator.appVersion.toLowerCase(),r="unknown";return-1!=t.indexOf("msie")?r=-1!=e.indexOf("msie 6.")?"ie6":-1!=e.indexOf("msie 7.")?"ie7":-1!=e.indexOf("msie 8.")?"ie8":-1!=e.indexOf("msie 9.")?"ie9":-1!=e.indexOf("msie 10.")?"ie10":"ie":-1!=t.indexOf("trident/7")?r="ie11":-1!=t.indexOf("chrome")?r="chrome":-1!=t.indexOf("safari")?r="safari":-1!=t.indexOf("opera")?r="opera":-1!=t.indexOf("firefox")&&(r="firefox"),r},isSupported:function(t){for(var e=getBrowser(),r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},getQuery:function(){for(var t=window.location.search.substring(1),e=t.split("&"),r={},n=0;n<e.length;n++){var i=e[n].indexOf("=");if(i>0){var o=e[n].substring(0,i),a=e[n].substring(i+1);r[o]=a}}return r}};